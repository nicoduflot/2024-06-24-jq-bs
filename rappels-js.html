<!DOCTYPE html>
<html lang="fr">
    
<head>
    <script>
        console.log('début du chargement du DOM');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formation JQUERY - Rappels JS</title>
    <!--
    Ajout des fichiers JS et CSS pour Bootstrap (et JQuery)
    -->
    <link rel="stylesheet" href="./css/bootstrap.css" />
    <script src="./js/popper.js"></script>
    <script src="./js/jquery-3.7.1.js"></script>
    <script src="./js/bootstrap.js"></script>
    <link rel="stylesheet" href="./css/style.css">
    <script src="./js/scripts.js"></script>
    <script>
        console.log('console.log permet d\'écrire ou d\'afficher le contenu d\'une variable dans la console du navigateur');
        console.error('affiche un message sous la forme d\'une erreur dans la console');
        console.table(['toto', 'tata', 'titi']);
        // commentaire en une ligne A ÉVITER !
        /*
        commentaire en bloc
        */
        console.log('a bah voilà !');
        /* variables */
        var prenom = 'Jean'; /* on n'utilise plus var depuis ES6 */
        /* 
        Constante : avec ES6, il est préconisé d'utiliser au maximum la déclaration de constantes pour toutes les variables qui ne changeront jamais de contenu dans le script 
        */
        const joursSemaine = ['Lundi', 'Mardi', 'Mercredi', 'Jeudi', 'Vendredi', 'Samedi', 'Dimanche'];
        /* les variables qui vont évoluer seront déclarées avec le mot clef let */
        let nom = 'Durand';
        nom = 'Neige';

        /*
        On utilisera aussi principalement les constantes lors de la manipulation du DOM : tous les éléments de la page sont des objets avec la même structure et les mêmes méthodes
        */

        /* On ne déclare le type des variables à leur création, c'est ce qu'elles contiennent qui défini leur type */

        console.log(typeof nom);
        nom = 42;
        console.log(typeof nom);

        /* on peut changer le type du conteneur d'une variable en changeant son contenu => transtypage */

        nom = nom + 'toto';
        console.log(nom);
        console.log(typeof nom);

        const ageActuel = 44;
        const depActuel = 59;
        const prenomActuel = 'Nicolas';

        /* bonjour, je m'appelle prenomActuel, j'ai ageActuel et j'habite dans le département depActuel */
        /* on n'utilise plus la concaténation avec le signe + pour créer des chaîne de caractère contenant des variables */
        console.log('bonjour, je m\'appelle ' + prenomActuel + ', j\'ai ' + ageActuel + ' et j\'habite dans le département ' + depActuel);
        /* on va utiliser l'interpolation de texte */
        console.log( `bonjour, je m'appelle ${prenomActuel}, j'ai ${ageActuel} et j'habite dans le département ${depActuel}` );
        console.log( `le total de l'addition est : ${12 + 125.3}` );

        /*
        les types de variables
        Deux catégories de variables
        [Type primitif]
            int => nombre entier (sous-type de number => un nombre)
            float => nombre à virgule flottante (sous-type de number => un nombre)
            bool => booléeen (vrai ou faux)
        
        [Type référence]
            string => chaîne de caractère
            array => tableau de variables
            object => les objets
            JSON => JavaScript Object Notation
        */

        /*
        Opérateurs :
        Mathématiques : 
            + addition 
            - soustraction 
            * multiplication 
            / division 
            % modulo : récupère le reste d'une division entière
        */
        console.log(`reste de la division entière 5/2 : ${5%2}`);
        /*
            ** puissance, remplace Math.pow()
        */
        console.log(`avant **, Math.pow(2, 3) : ${Math.pow(2,3)}`);
        console.log(`avec **, 2**3 : ${2**3}`);

        /*
        Incrémentation : ++ --
        */

        let x = 12;
        console.log(x);     /* affiche 12 */
        console.log(x++);   /* affiche 12 puis passe la valeur de x à 13 */
        console.log(x);     /* affiche 13 */

        console.log(++x); /* passe la valeur dse x à 14 puis ça l'affiche affiche */

        /* les normes Ecmascript préconisent d'abandonner les propriétés raccourcies pour l'incrémentation & la décrémentation */
        /* on utlisiera plutôt la forme suivante */
        console.log(x);
        x = x + 1;
        console.log(x);

        /* 
        Opérateurs de comparaison 
        
        > supérieur à
        < inférieur à
        >= supérieur ou égal à
        <= inférieur ou égal à
        == égalité de valeur (non stricte)
        */
        console.log(`2 == 2 : ${2 == 2}`);
        console.log(`2 == '2' : ${2 == '2'}`);
        /*
        === égalité de valeur et de type (égalité stricte)
        */
        console.log(`2 == 2 : ${2 === 2}`);
        console.log(`2 == '2' : ${2 === '2'}`);
        /*
        même chose pour : 
        != différent en valeur (non strict)
        !== différent en valeur ET en type (stricte)
        */
        const a = 5;
        const b = '5';

        console.log(parseFloat <= b);
        /* <== ou >== n'existe pas encore en JS */

        /* 
        Opérateurs logiques
        && ET

        a && b si a est vrai et b est vrai alors retourne vrai
        a && b si a est vrai et b est faux alors retourne faux
        a && b si a est faux et b est vrai alors retourne faux
        a && b si a est faux et b est faux alors retourne faux

        || OU 
        a || b si a est vrai et b est vrai alors retourne vrai
        a || b si a est vrai et b est faux alors retourne vrai
        a || b si a est faux et b est vrai alors retourne vrai
        a || b si a est faux et b est faux alors retourne faux

        ! NON
        !a et a est vrai retourne faux
        !a et a est faux retourne vrai

        ^ OU EXCLUSIF BINAIRE (X-OR)
        a ^ b si a est vrai et b est vrai alors retourne faux
        a ^ b si a est vrai et b est faux alors retourne vrai
        a ^ b si a est faux et b est vrai alors retourne vrai
        a ^ b si a est faux et b est faux alors retourne faux

        */

        /* tableaux */
        /*
        var cars = new Array('Peugeot', 'Ford');
        */
        let cars = ['Peugeot', 'Ford'];
        console.log(typeof cars);

        console.log(cars);
        
        /* ajouter une valeur au tableau */
        
        cars.push('Hyundai');
        console.log(cars);
        cars.push('Fiat', 'Alpine');
        console.log(cars);

        /*let carsClone = cars;*/
        let carsClone = cars.slice();

        carsClone.push('Dacia');
        console.log(cars, carsClone);

        /* 
        créer deux variables en let 
        c et d
        c recevra 12
        d recevra 42
        afficher le résultat de leur addition, soustraction multiplication et division
        */

        let c = 12;
        let d = 42;
        console.log( ` ${c} + ${d} = ${c + d} `);
        console.log( ` ${c} - ${d} = ${c-d} ` );
        console.log( ` ${c} * ${d} = ${c*d} ` );
        console.log( ` ${c} / ${d} = ${c/d} ` );
        console.log( ` ${c} % ${d} = ${c%d} ` );

        /*
         créer un tableau s'appelant toto contenant les variables suivantes

         12, 42, Marguerite et Pimprenelle
        
         l'afficher dans la console

         ensuite y ajouter la valeur Megatron
        */

        let toto = [12, 42, 'Marguerite', 'Pimprenelle'];
        console.log(toto);
        console.table(toto);
        
        toto.push('Megatron');
        console.log(toto);
        console.table(toto);

        /* Les boucles sont des moyens de partourir des tableaux ou certains élément itérables */

        /* la boucle pour : trois pour différent */

        console.log('---- boucle for -----------');
        for(let i = 0; i < cars.length; i++){
            console.log(cars[i]);
        }

        console.log('---- boucle for in -----------');
        for(key in cars){
            console.log(cars[key]);
        }

        console.log('---- boucle for of -----------');
        for(value of cars){
            console.log(value);
        }
        
        /* tant que */
        console.log('---- boucle while -----------');
        let i = 0;
        while(i < 6){
            console.log(i);
            i = i + 1;
        }
        
        /* faire tant que */
        console.log('---- boucle do while -----------');
        i = 0;
        do{
            console.log(i);
            i = i + 1;
        }while(i < 0);
        
        /* méthodes de tableau pour les parcourir */
        /* .map() */
        
        console.log('---- méthode de tableau .map() -----------');
        cars.map( function(value, index, tab){
            console.log( `valeur : ${value}, index : ${index}, le tableau : ${tab} ` );
        } );
        
        /* .foreach() : sert aussi a parcouri les objets itérable qui ne sont pas des tableaux */
        
        console.log('---- méthode de parcour d\'objet itérable .foreach() -----------');
        cars.forEach( function(value, index, tab){
            console.log( `valeur : ${value}, index : ${index}, le tableau : ${tab} ` );
        } );

        const monObjet = {
            age: 44,
            bonjour : function(){
                return `bonjour, j'ai ${this.age}`;
            }
        };

        console.log(monObjet.bonjour());

        console.log(Math.pow(2, 3));

        /* les fonctions */
        /* exemple de fonction qui admet des paramètres et qui renvoit un résultat */
        function addition(a, b){
            return a + b;
        }

        let res = addition(12, 42);
        console.log(res);
        console.log(addition(12, 42));

        /* exemple de fonction qui admet des paramètres sans renvoyer de résultat */
        function tata(prenom = 'Kitty'){
            console.log(prenom);
        }

        tata('Nicolas');
        tata();

        /* callback function ou Fonction de rappel ou fonction anonyme */

        const titi = function(){
            console.log('tata');
        }

        titi();

        /* comment réellement lancer une fonction anonyme sans l'assigner à une variable */
        /* 
        fonction auto-éxécutée 
            forme de base 
            ( callback function )(paramètres si besoin qui alimentent la callback function)

            (
                function(a, b){
                    console.log(a + b);
                }
            )(12, 42);
        */

        (
            function(a, b){
                console.log(a + b);
            }
        )(12, 42);
 
        console.log(document.children);

        /* Manipulation du DOM */

        /* attendre que tout le document soit chargé dans le navigateur pour agir sur les éléments HTML qui le compose */

        /* addEventListener( événement surveillé, callback function a éxécuter quand l'événement survient ) */
        window.addEventListener('DOMContentLoaded', function(){
            console.log('le DOM est chargé');
            const header = document.getElementById('pageHeader');
            console.log(header);
            header.addEventListener('click', function(evenement){
                console.log(evenement);
                console.log(header.innerText);
            });

            const headerSmall = document.querySelector('header#pageHeader small');
            console.log(headerSmall);
            headerSmall.addEventListener('click', function(evenement){
                /*
                si on clique sur l'élément small du header, on arrête la propagation du clic donc l'événement clic sur le header ne sera pas déclenché
                */
                evenement.stopPropagation();
            });

            /* clic sur un paragraphe possèdant la classe clickMe */
            /* selecteur css pour un paragraphe avec la classe clickMe :  */
            document.querySelector('p.clickMe').addEventListener('click', function(){
                console.log('Le paragraphe avec la classe clickMe a été cliqué');
            });

            /* surveiller le clic sur le paragraphe avec l'id clickMe et afficher dans la console le texte qui se trouve à l'intérieur */
            document.getElementById('clickMe').addEventListener('click', function(){
                console.log(document.getElementById('clickMe').textContent);
                document.getElementById('textContent').value = document.getElementById('clickMe').textContent;
                console.log(document.getElementById('clickMe').innerText);
                document.getElementById('innerText').value = document.getElementById('clickMe').innerText;
            });

            console.log( document.getElementsByTagName('P') );
            const allP = document.querySelectorAll('p')
            console.log( allP );
            allP.forEach( function(p){
                /*console.log(p.innerText);*/
                p.addEventListener('mouseenter', function(){
                    /*p.style.backgroundColor = '#ccc';*/
                    p.style.setProperty('background-color', '#ccc');
                })
                
                p.addEventListener('mouseleave', function(){
                    p.style.removeProperty('background-color');
                })
            });
        });

    </script>
</head>

<body>
    <header class="bg-dark text-white py-2" id="pageHeader">
        <div class="container">
            <h1>JQUERY <small>Formation DAWAN</small></h1>
        </div>
    </header>
    <nav class="navbar bg-dark navbar-expand-md" data-bs-theme="dark">
        <div class="container">
            <a class="navbar-brand" href="./index.html">Accueil</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                data-bs-target="#nav-princ" aria-controls="nav-princ" aria-expanded="false"
                aria-label="Active la navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="nav-princ">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    <li class="nav-item">
                        <a class="nav-link" href="./rappels-js.html">Rappels JS</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="./index.html">Introduction JQuery</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="./jquerycss.html">JQuery & CSS</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="./ajax.html">JQuery Ajax</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="./jqbootstrap.html">JQuery & bootstrap</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link goBottom" href="#">Bas de page</a>
                    </li>
                    <!--
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown"
                            aria-expanded="false">
                            Dropdown
                        </a>
                        <ul class="dropdown-menu">
                            <li><a class="dropdown-item" href="#">Action</a></li>
                            <li><a class="dropdown-item" href="#">Another action</a></li>
                            <li>
                                <hr class="dropdown-divider">
                            </li>
                            <li><a class="dropdown-item" href="#">Something else here</a></li>
                        </ul>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link disabled" aria-disabled="true">Disabled</a>
                    </li>
                    -->
                </ul>
                <!--
                <form class="d-flex" role="search">
                    <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
                    <button class="btn btn-outline-success" type="submit">Search</button>
                </form>
                -->
            </div>
        </div>
    </nav>
    <main class="container">
        <section class="row">
            <h2>Rappels Javascript</h2>
            <article>
                <header>
                    <h3>Petits Rappels Javascript</h3>
                    <p>
                        On va faire un petit rappel sur Javascript, on utilisera principalement la console du navigateur
                    </p>
                </header>
            </article>
            <article>
                <h3>Manipuler le DOM</h3>
                <p>
                    DOM : Document Object Model
                </p>
                <p>
                    Javascript permet de manipuler le DOM, c'est dire
                    le HTML de la page dans laquelle il est exécuté.
                </p>
                <p>
                    Pour pouvoir manipuler le HTML avec javascript il faut que le DOM
                    soit complètement chargé.
                </p>
                <ul>
                    <li>Window : fenêtre</li>
                    <li>Document : document HTML</li>
                </ul>
                <p class="clickMe">
                    Pour manipuler le DOM avec javascript, deux concepts :
                </p>
                <ul>
                    <li>Évènement : une action ciblée sur le DOM</li>
                    <li>Action : Modifier, lire, ajouter, supprimer, ect.
                        des éléments du DOM</li>
                </ul>
            </article>
            <article>
                <h3>Guetter un évènement</h3>
                <p id="clickMe">
                    Ce paragraphe a un id clickMe, il va me permettre de surveiller ce
                    paragraphe en particulier, je vais surveille son clique.
                </p>
                <textarea style="width: 200px; height: 200px;" id="textContent"></textarea><br />
                <textarea style="width: 200px; height: 200px;" id="innerText"></textarea>
            </article>
        </section>
    </main>
</body>
<script>
    console.log('fin de chargement du DOM');
</script>
</html>